FORM display_alv.

  DATA: lo_alv        TYPE REF TO cl_salv_table,
        lo_columns    TYPE REF TO cl_salv_columns_table,
        lo_column     TYPE REF TO cl_salv_column_table,
        lo_functions  TYPE REF TO cl_salv_functions_list,
        lo_top        TYPE REF TO cl_salv_form_layout_grid,
        lo_label      TYPE REF TO cl_salv_form_label.

  IF lt_alv_display IS INITIAL.
    MESSAGE 'No data to display.' TYPE 'I'.
    RETURN.
  ENDIF.

  TRY.
      " --- Create SALV table
      CALL METHOD cl_salv_table=>factory
        IMPORTING
          r_salv_table = lo_alv
        CHANGING
          t_table      = lt_alv_display.

      " --- Create Top-of-List header
      lo_top = cl_salv_form_layout_grid=>create( ).
      lo_label = cl_salv_form_label=>create( |Report { sy-repid } - ALV Output| ).
      lo_top->add_row( ).
      lo_top->add_label( lo_label ).

      lo_alv->set_top_of_list( lo_top ).

      " --- Get Columns and optimize
      lo_columns = lo_alv->get_columns( ).
      lo_columns->set_optimize( abap_true ).

      " --- Rename column 'BETR1' (if exists)
      TRY.
          lo_column = lo_columns->get_column( 'BETR1' ).
          lo_column->set_short_text( 'Amount' ).
          lo_column->set_medium_text( 'Amount' ).
          lo_column->set_long_text( 'Amount in Local Currency' ).
        CATCH cx_salv_not_found.
      ENDTRY.

      " --- Enable toolbar buttons
      lo_functions = lo_alv->get_functions( ).
      lo_functions->set_all( abap_true ).

      " --- Display ALV
      lo_alv->display( ).

    CATCH cx_salv_msg INTO DATA(lx).
      MESSAGE lx->get_text( ) TYPE 'E'.
    CATCH cx_root INTO DATA(lx2).
      MESSAGE lx2->get_text( ) TYPE 'E'.
  ENDTRY.

ENDFORM.