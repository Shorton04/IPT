After checking the logic, the reason why the OBJ amount shows 120 USD while the Posting remains 100 USD is because both WBS elements — CM.000037 and CM.000037.0000.00.1 — belong to the same company code (ZX99).
The FX (foreign exchange) translation logic is only triggered inside the check_intcomp_scenario method when there’s an Intercompany flow (meaning different company codes).
Since both have the same company code, the FX logic is skipped, and there’s currently no existing condition in the code to apply FX for same-company scenarios.